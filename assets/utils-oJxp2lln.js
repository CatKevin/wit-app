import{ai as h,aj as m,ak as g,al as b,b as w,$ as u,ah as d,am as z,an as a,ao as A,s as S,ap as x,f as I,aq as P,ar as E}from"./index-DO2AmSyA.js";function M(e){let t;if(typeof e=="string")t=h(e);else{const s=m(e),n=e.length;for(let r=0;r<n;r++){const i=e[r];if(!g(i)){t=h(i,s);break}}}if(!t)throw new b({signature:e});return t}function f(e){return w(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}function j(e,t){if(e.length!==t.length)throw new Error("The number of parameters and values must match.");const s=$({params:e,values:t}),n=l(s);return n.length===0?"0x":n}function $({params:e,values:t}){const s=[];for(let n=0;n<e.length;n++)s.push(y({param:e[n],value:t[n]}));return s}function y({param:e,value:t}){const s=L(e.type);if(s){const[n,r]=s;return H(t,{length:n,param:{...e,type:r}})}if(e.type==="tuple")return F(t,{param:e});if(e.type==="address")return C(t);if(e.type==="bool")return W(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const n=e.type.startsWith("int");return _(t,{signed:n})}if(e.type.startsWith("bytes"))return T(t,{param:e});if(e.type==="string")return k(t);throw new Error(`Unsupported parameter type: ${e.type}`)}function l(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:c}=e[i];o?t+=32:t+=f(c)}const s=[],n=[];let r=0;for(let i=0;i<e.length;i++){const{dynamic:o,encoded:c}=e[i];o?(s.push(u(t+r,{size:32})),n.push(c),r+=f(c)):s.push(c)}return d(...s,...n)}function C(e){if(e!==""&&e!==void 0&&!z(e))throw new Error(`Invalid address: ${e}`);return{dynamic:!1,encoded:a(e.toLowerCase())}}function H(e,{length:t,param:s}){const n=t===null;if(!Array.isArray(e))throw new Error("Invalid array value.");if(!n&&e.length!==t)throw new Error("Invalid array length.");let r=!1;const i=[];for(let o=0;o<e.length;o++){const c=y({param:s,value:e[o]});c.dynamic&&(r=!0),i.push(c)}if(n||r){const o=l(i);if(n){const c=u(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?d(c,o):c}}if(r)return{dynamic:!0,encoded:o}}return{dynamic:!1,encoded:d(...i.map(({encoded:o})=>o))}}function T(e,{param:t}){const[,s]=t.type.split("bytes"),n=f(e);if(!s){let r=e;return n%32!==0&&(r=a(r,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:d(a(u(n,{size:32})),r)}}if(n!==Number.parseInt(s))throw new Error(`Invalid bytes${s} size: ${n}`);return{dynamic:!1,encoded:a(e,{dir:"right"})}}function W(e){return{dynamic:!1,encoded:a(A(e))}}function _(e,{signed:t}){return{dynamic:!1,encoded:u(e,{signed:t,size:32})}}function k(e){const t=S(e),s=Math.ceil(f(t)/32),n=[];for(let r=0;r<s;r++)n.push(a(x(t,r*32,(r+1)*32),{dir:"right"}));return{dynamic:!0,encoded:d(a(u(f(t),{size:32})),...n)}}function F(e,{param:t}){let s=!1;const n=[];for(let r=0;r<t.components.length;r++){const i=t.components[r],o=Array.isArray(e)?r:i.name,c=y({param:i,value:e[o]});n.push(c),c.dynamic&&(s=!0)}return{dynamic:s,encoded:s?l(n):d(...n.map(({encoded:r})=>r))}}function L(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const p=new P(4096);function B(e){const t=typeof e=="string"?e:I(e);if(p.has(t))return p.get(t);const s=typeof e=="string"?M(e):e,r=[E(s),s.inputs,s.outputs];return p.set(t,r),r}function q(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="function")}export{M as a,j as e,q as i,B as p};
